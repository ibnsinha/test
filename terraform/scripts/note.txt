before_script:
  - echo "ğŸ”‘ Assuming AWS IAM role..."
  - python3 scripts/assume_role.py || { echo "âŒ Failed to assume role"; exit 1; }
  - echo "âœ… Role assumed successfully, loading credentials..."
  - export $(grep -v '^#' /tmp/aws_credentials | xargs)
  - aws sts get-caller-identity  # Confirm authentication (ID will be masked)
  - echo "ğŸš€ Running Python script to generate Terraform configuration..."
  - python3 scripts/generate_iam_role_tf.py || { echo "âŒ Failed to generate Terraform configuration"; exit 1; }
  - rm -f /tmp/aws_credentials  # ğŸ›‘ Remove credentials after use

